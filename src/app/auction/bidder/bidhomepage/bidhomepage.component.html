<div style="width: 100vw; height: 100vh; display: flex" *ngIf="isLoading">
  <div
    style="
      width: 100%;
      height: 100%;
      justify-content: center;
      display: flex;
      flex-direction: column-reverse;
    "
  >
    <app-loading-spinner
      style="
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
      "
    ></app-loading-spinner>

    <h2 style="display: flex; align-items: center; justify-content: center">
      Loading
    </h2>
  </div>
</div>

<div *ngIf="!isLoading" class="whole-container">
  <h2 style="text-align: center">Live Auction</h2>
  <div style="display: flex; justify-content: center" class="auction-container">
    <div
      *ngFor="let auction of activeAuctions()"
      class="auction-item"
      style="width: 68%"
    >
      <div>
        <h2>{{ auction.title }}</h2>
        <p>Description: {{ auction.description }}</p>
        <p>Start Time: {{ auction.startTime | date : "medium" }}</p>
        <p class="pTag">Category : {{ auction.category }}</p>
        <p class="pTag">auctionType : {{ auction.auctionType }}</p>
        <p class="pTag">auctionStatus : {{ auction.auctionStatus }}</p>
        <p class="pTag">Date : {{ auction.date }}</p>
        <p class="pTag">slotNumber : {{ auction.slot.slotNumber }}</p>
        <p class="pTag">startTime : {{ auction.slot.startTime }}</p>
        <p class="pTag">endTime : {{ auction.slot.endTime }}</p>
        <p *ngIf="auction.isPaid">Paid Auction</p>
        <p *ngIf="!auction.isPaid">Free Auction</p>
      </div>
      <div style="width: 40%">
        <img
          style="width: 100%"
          src="{{ auction.imageData }}"
          alt="No Image Found"
        />
      </div>
      <div
        style="display: flex; flex-direction: column; justify-content: center"
      >
        <button
          style="margin-left: 10px"
          [ngStyle]="{
        'background-color': isRegistered(auction.auctionId) ? 'blue' : 'gray',
        'color': 'white',
        'cursor': isRegistered(auction.auctionId) ? 'allowed' : 'pointer',
      }"
          [disabled]="!isRegistered(auction.auctionId)"
          (click)="takePart(auction)"
        >
          Take Part
        </button>
      </div>
    </div>
  </div>
  <hr />
  <h2 style="text-align: center">Upcoming Auctions</h2>
  <div>
    <h2>Current Date and Time: {{ currentDateTime | date : "medium" }}</h2>
  </div>
  <div>
    <div *ngIf="auctions.length > 0; else noHistory" class="auction-grid">
      <div
        style="display: flex; flex-direction: column; justify-content: center"
        *ngFor="let auction of filteredAuctions()"
        class="auction-item"
      >
        <div>
          <h2>{{ auction.title }}</h2>
          <p>Description: {{ auction.description }}</p>
          <p>Start Time: {{ auction.startTime | date : "medium" }}</p>
          <p class="pTag">Category : {{ auction.category }}</p>
          <p class="pTag">auctionType : {{ auction.auctionType }}</p>
          <p class="pTag" *ngIf="auction.auctionType == 'Paid'">
            registerFee : {{ auction.registerFee }}
          </p>
          <p class="pTag">auctionStatus : {{ auction.auctionStatus }}</p>
          <p class="pTag">Date : {{ auction.date }}</p>
          <p class="pTag">slotNumber : {{ auction.slot.slotNumber }}</p>
          <p class="pTag">startTime : {{ auction.slot.startTime }}</p>
          <p class="pTag">endTime : {{ auction.slot.endTime }}</p>
        </div>
        <div style="width: 40%">
          <img
            style="width: 100%"
            src="{{ auction.imageData }}"
            alt="No Image Found"
          />
        </div>
        <div *ngIf="auctionStartTimes[auction.auctionId] > 0">
          <p>
            Time Remaining:
            {{ formatTimeRemaining(auctionStartTimes[auction.auctionId]) }}
          </p>
        </div>
        <p *ngIf="auction.auctionType == 'Paid'">Paid Auction</p>
        <p *ngIf="auction.auctionType == 'Free'">Free Auction</p>
        <div>
          <button
            [ngStyle]="{
        'background-color': isRegistered(auction.auctionId) ? 'gray' : 'blue',
        color: 'white',
        cursor: isRegistered(auction.auctionId) ? 'pointer' : 'allowed',
      }"
            [disabled]="isRegistered(auction.auctionId)"
            (click)="register(auction)"
          >
            Register
          </button>
          <button
            style="margin-left: 10px"
            [ngStyle]="{
          'background-color': !isRegistered(auction.auctionId) ? 'gray' : 'blue',
          'color': 'white',
          'cursor': !isRegistered(auction.auctionId) ? 'not-allowed' : 'pointer',
        }"
            [disabled]="!isRegistered(auction.auctionId)"
          >
            UnRegister
          </button>
        </div>
        <app-pagination
          [pageSize]="pageSize"
          [totalItems]="totalItems"
          [currentPage]="currentPage"
          (pageChange)="onPageChange($event)"
        ></app-pagination>
      </div>
    </div>
    <ng-template #noHistory>
      <p>No upcoming auction available.</p>
    </ng-template>
  </div>
</div>
