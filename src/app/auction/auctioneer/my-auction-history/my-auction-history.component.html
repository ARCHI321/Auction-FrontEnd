<div style="width: 100vw; height: 100vh; display: flex" *ngIf="isLoading">
  <div
    style="
      width: 100%;
      height: 100%;
      justify-content: center;
      display: flex;
      flex-direction: column-reverse;
    "
  >
    <app-loading-spinner
      style="
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
      "
    ></app-loading-spinner>
    <h2 style="display: flex; align-items: center; justify-content: center">
      Loading
    </h2>
  </div>
</div>
<div *ngIf="isAuctioneer() && !isLoading" class="whole-container">
  <app-back [backLocation]="backLocation"></app-back>
  <div class="container">
    <h2>Auction History</h2>
    <div *ngIf="auctions.length > 0; else noHistory">
      <div
        class="history-item"
        *ngFor="
          let auction of auctions
            | slice
              : (currentPage - 1) * pageSize
              : (currentPage - 1) * pageSize + pageSize
        "
      >
        <div
          style="display: flex; flex-direction: column; justify-content: center"
        >
          <h3 style="font-size: 30px; font-weight: bold">
            {{ auction.title }}
          </h3>
          <p style="display: none" id="{{ auction.auctionId }}">
            {{ auction.auctionId }}
          </p>
          <p class="pTag">Description : {{ auction.description }}</p>
          <p class="pTag">Category : {{ auction.category }}</p>
          <p class="pTag">StartingPrice : {{ auction.startingPrice }}</p>
          <p class="pTag">auctionType : {{ auction.auctionType }}</p>
          <p class="pTag" *ngIf="auction.auctionType == 'Paid'">
            registerFee : {{ auction.registerFee }}
          </p>
          <p class="pTag">auctionStatus : {{ auction.auctionStatus }}</p>
          <p class="pTag">Date : {{ auction.date }}</p>
          <p class="pTag">slotNumber : {{ auction.slot.slotNumber }}</p>
          <p class="pTag">startTime : {{ auction.slot.startTime }}</p>
          <p class="pTag">endTime : {{ auction.slot.endTime }}</p>
        </div>
        <div style="width: 40%">
          <img
            style="width: 100%"
            src="{{ auction.imageData }}"
            alt="No Image Found"
          />
        </div>
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 13%;
          "
          *ngIf="auction.auctionStatus === 'UPCOMING'"
        >
          <button (click)="editAuction(auction.auctionId)" class="btn">
            Edit
          </button>
          <button (click)="deleteAuction(auction.auctionId)" class="btn">
            Delete
          </button>
        </div>
      </div>

      <app-pagination
        [pageSize]="pageSize"
        [totalItems]="totalItems"
        [currentPage]="currentPage"
        (pageChange)="onPageChange($event)"
      ></app-pagination>
    </div>
    <ng-template #noHistory>
      <p>No auction history available.</p>
    </ng-template>
  </div>
</div>

<div *ngIf="isBidder() && !isLoading" class="whole-container">
  <app-back [backLocation]="backLocation"></app-back>
  <div class="history-container">
    <div class="history">
      <h2 style="text-align: center">Auction History</h2>
      <div *ngIf="auctionHistory.length > 0; else noHistory">
        <div *ngFor="let item of auctionHistory" class="history-item">
          <h3>{{ item.title }}</h3>
          <p>Description: {{ item.description }}</p>
          <p>Final Price: {{ item.currentPrice }}</p>
          <p>Winner: {{ item.winnerId }}</p>
        </div>
      </div>
      <ng-template #noHistory>
        <p>No auction history available.</p>
      </ng-template>
    </div>
  </div>
</div>
